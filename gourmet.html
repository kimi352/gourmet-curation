<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>◆ Gourmet Curation V2</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Noto+Sans+KR:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        /* ================================================= */
        /* 1. 디자인 및 레이아웃 (Minimal Luxury Style)       */
        /* ================================================= */
        
        :root {
            --primary-color: #A68D5B; /* 젠틀 골드/브론즈 (고급스러움 상징) */
            --background-color: #F8F8F8; /* 깨끗한 오프 화이트 */
            --text-dark: #222222; /* 깊은 블랙 */
            --text-light: #666666; /* 소프트 그레이 */
            --border-color: #E0E0E0; /* 얇고 정제된 경계 */
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--background-color);
            color: var(--text-dark);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: flex-start;
        }

        .container {
            width: 95%;
            max-width: 800px;
            padding: 60px 40px; 
            background-color: white;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05); 
            border-radius: 4px;
            margin: 50px 0;
        }

        /* 헤더 스타일 */
        h1 {
            font-family: 'Playfair Display', serif;
            text-align: left;
            color: var(--text-dark);
            margin-bottom: 5px;
            font-weight: 700;
            font-size: 2.8em;
            letter-spacing: 2px;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 15px;
        }
        .subtitle {
            text-align: left;
            color: var(--text-light);
            font-size: 0.9em;
            margin-bottom: 40px;
            font-weight: 300;
        }

        /* 입력 폼 스타일 */
        .input-group {
            margin-bottom: 25px;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 5px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 400;
            color: var(--text-light);
            font-size: 0.9em;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        input[type="text"] {
            width: 100%;
            padding: 10px 0;
            border: none;
            background-color: transparent;
            font-size: 1.1em;
            color: var(--text-dark);
            font-weight: 600;
        }

        input[type="text"]:focus {
            outline: none;
            border-bottom: 2px solid var(--primary-color);
        }

        /* 버튼 스타일 */
        button {
            width: 100%;
            background-color: var(--text-dark);
            color: white;
            padding: 16px;
            border: none;
            border-radius: 0;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            letter-spacing: 1px;
            transition: background-color 0.3s, color 0.3s;
            text-transform: uppercase;
            margin-top: 30px;
        }

        button:hover {
            background-color: var(--primary-color);
            color: var(--text-dark);
        }

        /* 결과 출력 영역 */
        .output-section {
            margin-top: 60px;
            padding-top: 30px;
            border-top: 1px solid var(--border-color);
        }

        h3 {
            font-family: 'Playfair Display', serif;
            color: var(--text-dark);
            margin-bottom: 25px;
            font-size: 1.5em;
            font-weight: 400;
        }

        .result-card {
            padding: 25px;
            border: 1px solid var(--primary-color);
            background-color: #FFFFF8;
            border-radius: 2px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.03);
        }

        .result-card h4 {
            color: var(--primary-color);
            font-size: 1.1em;
            margin-top: 0;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .result-card p {
            color: var(--text-light);
            font-size: 0.95em;
        }

        .loading-message, .error-message {
            text-align: center;
            padding: 15px;
            border: 1px dashed var(--border-color);
            color: var(--text-light);
        }

        .error-message {
            color: #D32F2F;
            border-color: #D32F2F;
            background-color: #FFEEEE;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Gourmet Curation</h1>
        <p class="subtitle">The exclusive dining recommendation tailored by your needs and mood.</p>

        <div class="input-section">
            <div class="input-group">
                <label for="category">I. 카테고리 / 종류 (Category)</label>
                <input type="text" id="category" placeholder="한식, 양식, 중식, 카페 등">
            </div>
             <div class="input-group">
                <label for="request_details">II. 세부 요청사항 / 분위기 (Details)</label>
                <input type="text" id="request_details" placeholder="예: 분위기 좋은, 조용한, 데이트하기 좋은">
            </div>
            <div class="input-group">
                <label for="location">III. 내 위치 / 희망 지역 (Location)</label>
                <input type="text" id="location" placeholder="예: 강남, 홍대, 서초">
            </div>
            <div class="input-group">
                <label for="weather">IV. 현재 날씨 (Weather)</label>
                <input type="text" id="weather" placeholder="맑음, 흐림, 비 등">
            </div>
            <div class="input-group">
                <label for="mood">V. 오늘의 기분 (Mood)</label>
                <input type="text" id="mood" placeholder="행복한, 차분한, 활기찬 등">
            </div>
            
            <button onclick="register()">Discover Your Dish</button>
        </div>

        <div class="output-section">
            <h3>Recommended Selection</h3>
            <div id="restaurant-output">
                <p style="text-align: center; color: var(--text-light);">5가지 기준을 모두 입력하고, 정교한 추천을 받아보세요.</p>
            </div>
        </div>
    </div>

    <script>
        // [핵심 요구 사항 1] API 서버의 주소를 담는 상수 SERVER_URL을 맨 위에 정의
        const SERVER_URL = "https://fd381214-5225-4950-b097-58f554b7dbc0-00-27knla79zu19u.pike.replit.dev"; // ⚠️ 실제 백엔드 주소로 교체 필요!

        /**
         * 5개의 입력 필드의 데이터를 모아 서버에 POST 요청으로 전송하는 함수
         */
        function register() {
            // 1. 입력 필드 값 수집 (총 5개)
            const category = document.getElementById('category').value;
            const requestDetails = document.getElementById('request_details').value;
            const location = document.getElementById('location').value;
            const weather = document.getElementById('weather').value;
            const mood = document.getElementById('mood').value;

            if (!category || !requestDetails || !location || !weather || !mood) {
                alert('모든 5가지 정보를 입력해주세요.');
                return;
            }

            // 2. 서버에 전송할 JSON 데이터 객체 생성 (5가지 데이터 포함)
            const requestData = {
                category: category,
                request_details: requestDetails,
                location: location,
                weather: weather,
                mood: mood
            };

            const outputDiv = document.getElementById('restaurant-output');
            outputDiv.innerHTML = '<p class="loading-message">Curating the finest options...</p>';

            // 3. [핵심 요구 사항 2] fetch 함수 포함
            fetch(SERVER_URL, {https://fd381214-5225-4950-b097-58f554b7dbc0-00-27knla79zu19u.pike.replit.dev/recommend
                method: 'POST', 
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(requestData) 
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP Error! Status: ${response.status} (${response.statusText})`);
                }
                return response.json(); 
            })
            .then(data => {
                console.log('Server response:', data);
                
                // 서버 응답 예시: { restaurantName: '...', menu: '...', description: '...' }
                if (data && data.restaurantName) {
                    outputDiv.innerHTML = `
                        <div class="result-card">
                            <h4>★ ${data.restaurantName} (${data.category || category})</h4>
                            <p><strong>Cuisine:</strong> ${data.menu || 'Signature Menu'}</p>
                            <p><strong>Note:</strong> ${data.description || 'An elegant choice perfectly matching your preferences.'}</p>
                        </div>
                    `;
                } else {
                    outputDiv.innerHTML = '<p class="error-message">데이터 형식이 유효하지 않습니다. 서버 응답을 확인하세요.</p>';
                }
            })
            .catch(error => {
                console.error('Fetch Error:', error);
                
                outputDiv.innerHTML = `
                    <div class="error-message">
                        <strong>Connection Error:</strong> 서버 연결에 실패했습니다.<br>
                        <small>(${error.message})</small>
                        <p style="margin: 5px 0 0; font-size: 0.9em; font-weight: 600;">[Developer Note] Please check the SERVER_URL constant in JavaScript.</p>
                    </div>`;
            });
        }
    </script>
</body>

</html>





